@page
@model PRN232_FA25_Assignment_G7.RazorPages.Pages.Admin.Violations.DetailsModel
@{
    ViewData["Title"] = "Violation Details";
}

<h2>Violation Details</h2>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

@if (Model.Violation != null)
{
    <div class="card mb-3">
        <div class="card-header">
            <h4>Basic Information</h4>
        </div>
        <div class="card-body">
            <p><strong>ID:</strong> @Model.Violation.Id</p>
            <p><strong>Student:</strong> @Model.Violation.StudentName</p>
            <p><strong>Exam:</strong> @Model.Violation.ExamName</p>
            <p><strong>Description:</strong> @Model.Violation.Description</p>
            <p><strong>Created At:</strong> @Model.Violation.CreatedAt.ToString("g")</p>
        </div>
    </div>
    <div class="card mb-3">
        <div class="card-header">
            <h4>Review Information</h4>
        </div>
        <div class="card-body">
            <p>
                <strong>Status:</strong>
                @if (Model.Violation.ReviewStatus == "Pending")
                {
                    <span class="badge bg-warning">@Model.Violation.ReviewStatus</span>
                }
                else if (Model.Violation.ReviewStatus == "ModeratorApproved")
                {
                    <span class="badge bg-info">Moderator Approved</span>
                }
                else if (Model.Violation.ReviewStatus == "AdminApproved")
                {
                    <span class="badge bg-success">Admin Approved</span>
                }
                else if (Model.Violation.ReviewStatus == "ModeratorRejected" || Model.Violation.ReviewStatus == "AdminRejected")
                {
                    <span class="badge bg-danger">Rejected</span>
                }
            </p>
            <p><strong>Reviewed By:</strong> @(Model.Violation.ReviewedBy ?? "-")</p>
            <p><strong>Review Comments:</strong> @(Model.Violation.ReviewComments ?? "-")</p>
            <p><strong>Zero Score:</strong> @(Model.Violation.IsZeroScore ? "Yes" : "No")</p>
        </div>
    </div>
    <div class="mt-3">
        <a asp-page="./Index" class="btn btn-secondary">Back to Violations</a>
    </div>
}
