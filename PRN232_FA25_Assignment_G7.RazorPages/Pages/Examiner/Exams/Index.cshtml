@page
@model PRN232_FA25_Assignment_G7.RazorPages.Pages.Examiner.Exams.IndexModel
@{
    ViewData["Title"] = "My Exams";
}

<h1>@ViewData["Title"]</h1>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}
@if (TempData["AuthError"] != null)
{
    <div class="alert alert-danger">@TempData["AuthError"]</div>
}

@if (Model.Exams != null && Model.Exams.Any())
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Exam Name</th>
                <th>Subject</th>
                <th>Semester</th>
                <th>Submissions</th>
                <th>Grading Progress</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var exam in Model.Exams)
            {
                <tr>
                    <td>@exam.ExamName</td>
                    <td>@exam.SubjectName</td>
                    <td>@exam.SemesterName</td>
                    <td>@exam.TotalSubmissions</td>
                    <td>
                        <span class="badge bg-@(exam.GradingProgress?.Contains("100") == true ? "success" : exam.GradingProgress?.Contains("0") == true ? "secondary" : "warning")">
                            @exam.GradingProgress
                        </span>
                    </td>
                    <td>
                        <a asp-page="/Examiner/Submissions/Index" asp-route-examId="@exam.Id" class="btn btn-primary btn-sm">View Submissions</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">No exams assigned.</p>
}
